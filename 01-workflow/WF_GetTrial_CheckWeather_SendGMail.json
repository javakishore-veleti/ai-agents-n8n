{
  "name": "My workflow",
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "Role: You are a smart, weather-aware trail running assistant. You help me decide whether I should go for a trail run today and which trail would be the best match. Your tone should be friendly, helpful, and concise — like a knowledgeable friend who runs.\n\nTask: Decide if I should go for a trail run today. If so, recommend the best trail based on time, weather, air quality, and trail attributes. If it's not a good day to run, explain why and stop.\n\nInput: You have access to the following:\n\nMy calendar via the checkCalendar tool. You're looking for an event titled “Trail Run” scheduled for today.\n\nThe current weather in Draper, Utah via the getWeather tool.\n\nA list of trail runs from the getHikeList tool. Each trail includes:\n\nName\n\nDistance (miles)\n\nElevation gain (feet)\n\nEstimated time (minutes)\n\nShade Level: “Shady”, “Some Shade”, or “Exposed”\n\nTools: Use only these tools to perform your reasoning and take action:\n\ncheckCalendar: Returns today’s events.\n\ngetWeather: Returns temperature and conditions in Draper, US.\n\ngetHikeList: Returns a list of trails with the fields described above.\n\nsendMessage: Sends me your final recommendation or status message.",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        208,
        0
      ],
      "id": "d68748ad-50ca-432b-b290-b4b3c7e538bd",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-5-mini",
          "mode": "list",
          "cachedResultName": "gpt-5-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        80,
        208
      ],
      "id": "7fcfb4f0-77d5-4a55-8f42-d795b3ff9b96",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "JLfEUoeafa0vXvb6",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "trial-run-session"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        224,
        208
      ],
      "id": "4498db5f-92be-46a9-bdfd-76e0e49356a2",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "calendar": {
          "__rl": true,
          "value": "ab@gmail.com",
          "mode": "list",
          "cachedResultName": "ab@gmail.com"
        },
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        368,
        208
      ],
      "id": "f7a90f8a-18a8-416f-acb4-976bf75c99c5",
      "name": "Create an event in Google Calendar",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "tewKr3J6RXeHs2Ad",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 5
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        0,
        0
      ],
      "id": "f6fbb274-1453-40e3-9190-dcca5048cc4f",
      "name": "checkCalendar",
      "alwaysOutputData": true,
      "notesInFlow": true,
      "executeOnce": false
    },
    {
      "parameters": {
        "format": "imperial",
        "cityName": "Monroe"
      },
      "type": "n8n-nodes-base.openWeatherMapTool",
      "typeVersion": 1,
      "position": [
        464,
        304
      ],
      "id": "fba94161-8f96-41a7-b350-ffadf18f7158",
      "name": "getWeather",
      "credentials": {
        "openWeatherMapApi": {
          "id": "Fn1Nww5LpSQbqmd7",
          "name": "OpenWeatherMap account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "18WHRYJ1SMx6pqmeFMTjFHdLYUAQU9sKBzaJ-7lpLcPY",
          "mode": "list"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/2234RXJ2SMx9pqmeGTMjFHdLYUAQU7sABzaJ-7lpLcPY/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        560,
        400
      ],
      "id": "4f7382b7-e780-435d-9a43-15f72e81cddb",
      "name": "getHikeList",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AXhO7gwYfSk1kc36",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "ab@gmail.com\n",
        "subject": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Subject', ``, 'string') }}",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "options": {}
      },
      "type": "n8n-nodes-base.gmailTool",
      "typeVersion": 2.1,
      "position": [
        656,
        400
      ],
      "id": "cd1c2e61-bba4-4085-87ff-0a9d906420ef",
      "name": "sendMessage",
      "webhookId": "563079cc-395c-4dea-a828-3a507171e67e",
      "credentials": {
        "gmailOAuth2": {
          "id": "fHAGUsYxPiuxpESk",
          "name": "Gmail account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Create an event in Google Calendar": {
      "ai_tool": [
        []
      ]
    },
    "AI Agent": {
      "main": [
        []
      ]
    },
    "checkCalendar": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "getWeather": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "getHikeList": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "sendMessage": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "executionTimeout": -1
  },
  "versionId": "db46a417-3140-493f-a97d-379b650bca7c",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "39d32cab17d35a027f9da9e67eec9d411fdfef734a5593ab51d3ddb5c0d76aa9"
  },
  "id": "Xs6ozNCpXIrYkZ76",
  "tags": []
}